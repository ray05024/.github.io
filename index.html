<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>Merry Christmas â¤ï¸</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Roboto:wght@300;400&display=swap" rel="stylesheet"/>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      background: radial-gradient(circle at top, #1d3b2f 0%, #082019 60%, #010a07 100%);
      font-family: "Roboto", sans-serif;
      color: #fef8e8;
      overflow-x: hidden;
      min-height: 100vh;
    }

    header {
      text-align: center;
      padding: 70px 0 5px;
    }

    header h1 {
      font-family: "Playfair Display", serif;
      font-size: 2.4rem;
      letter-spacing: 2px;
      color: #f6e3a2;
      text-shadow: 0 0 15px rgba(255, 215, 138, 0.6);
    }

    header p {
      margin-top: 8px;
      color: #e9dbb8;
      font-size: 1rem;
    }

    .carousel-container {
        position: relative;
        width: 100%;
        height: 520px;
        margin-top: calc(50vh - 260px); /* é«˜åº¦ä¸€åŠ - ä¸€åŠ Carousel */
        perspective: 1400px;
        overflow: visible;
    }

    .carousel {
      width: 100%;
      height: 100%;
      position: absolute;
      transform-style: preserve-3d;
      transition: transform 1s ease;
    }

    .polaroid {
      width: 220px;
      padding: 12px 12px 26px;
      background: #ffffff;
      border-radius: 6px;
      box-shadow:
        0 20px 35px rgba(0,0,0,0.45),
        0 0 0 1px rgba(0,0,0,0.15);
      position: absolute;
      left: calc(50% - 110px);
      top: 60px;
      transform-style: preserve-3d;
      transition:
        transform 0.5s ease,
        box-shadow 0.5s ease;
      cursor: pointer;
    }

    .polaroid img {
      width: 100%;
      height: 260px;
      object-fit: cover;
      border-radius: 4px;
    }

    .label {
      margin-top: 8px;
      text-align: center;
      color: #444;
      font-family: "Playfair Display", serif;
      font-size: 0.95rem;
    }

    /* Lightbox (full screen image) */
    .lightbox-backdrop {
      position: fixed;
      inset: 0;
      background: rgba(3, 7, 6, 0.92);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
    }
    .lightbox-backdrop.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .lightbox img {
      max-width: 90%;
      max-height: 80%;
      border-radius: 10px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
    }

    .close-btn {
      position: fixed;
      top: 20px;
      right: 25px;
      font-size: 2.5rem;
      color: #f5dba5;
      cursor: pointer;
      z-index: 30;
    }

    /* Snow */
    .snow {
      pointer-events: none;
      position: fixed;
      inset: 0;
      overflow: hidden;
      z-index: 0;
    }
    .flake {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      filter: blur(1px);
      animation: fall linear infinite;
    }
    @keyframes fall {
      from { transform: translateY(-10px); }
      to { transform: translateY(110vh); }
    }
  </style>
</head>
<body>

<div class="snow" id="snow"></div>

<header>
  <h1>Merry Christmas, My Love â¤ï¸</h1>
  <p>é€çµ¦æœ€é‡è¦çš„ä½ ï¼Œæ¯ä¸€å¼µéƒ½æ˜¯æˆ‘æœ€çæƒœçš„æ™‚åˆ»ã€‚</p>
</header>

<div class="carousel-container">
  <div id="carousel" class="carousel">
  </div>
</div>

<!-- Lightbox -->
<div id="lightbox" class="lightbox-backdrop">
  <div class="close-btn" id="closeBtn">&times;</div>
  <img id="lightboxImg" src="" />
</div>
<script>
/* ========== 1. ä½ çš„ä¹å¼µç…§ç‰‡èˆ‡èªªæ˜æ–‡å­— ========== */
const photos = [
  { src: "photos/1.jpg", label: "ç¬¬ä¸€æ¬¡ç´„æœƒ ğŸ’«" },
  { src: "photos/2.jpg", label: "ä¸€èµ·å¤§ç¬‘çš„ç¬é–“ ğŸ˜†" },
  { src: "photos/3.JPG", label: "æµ·é‚Šçš„æµªæ¼« ğŸŒŠ" },
  { src: "photos/4.jpg", label: "ä½ çš„ç¬‘å®¹çœŸçš„å¾ˆæ²»ç™’ â¤ï¸" },
  { src: "photos/5.jpg", label: "æœ€å¯æ„›çš„æ¨£å­ âœ¨" },
  { src: "photos/6.jpg", label: "ä¸€èµ·èµ°éçš„é¢¨æ™¯ ğŸ“¸" },
  { src: "photos/7.jpg", label: "ç”œç”œçš„é åœ¨æˆ‘è‚©ä¸Š ğŸ’•" },
  { src: "photos/8.jpg", label: "æ—…è¡Œçš„å°ç¬é–“ ğŸš—" },
  { src: "photos/9.jpg", label: "æƒ³å’Œä½ ä¸€èµ·åº¦éæ¯ä¸€å¹´ ğŸ„" },
];

/* ========== 2. å‹•æ…‹å»ºç«‹æ‹ç«‹å¾—å¡ç‰‡ ========== */
const carousel = document.getElementById("carousel");

photos.forEach((p, i) => {
  const card = document.createElement("div");
  card.className = "polaroid";
  card.innerHTML = `
    <img src="${p.src}" alt="memory ${i+1}" />
    <div class="label">${p.label}</div>
  `;
  carousel.appendChild(card);
});

/* ========== 3. Carousel 3D æ’åˆ— ========== */

let angle = 0;
const cards = document.querySelectorAll(".polaroid");
const total = cards.length;
const degStep = 360 / total;

function updateCarousel() {
  cards.forEach((card, i) => {
    const currentAngle = degStep * i + angle;
    const rad = currentAngle * Math.PI / 180;

    const x = Math.sin(rad) * 380;   // å·¦å³è·é›¢
    const z = Math.cos(rad) * 380;   // å‰å¾Œè·é›¢
    const scale = z > 0 ? 1.2 : 0.8; // ä¸­é–“æ”¾å¤§ã€å¾Œé¢ç¸®å°
    const blur = z < 0 ? 4 : 0;      // å¾Œæ–¹æ¨¡ç³Šæ•ˆæœ

    card.style.transform = `
      translateX(${x}px)
      translateZ(${z}px)
      rotateY(${currentAngle}deg)
      scale(${scale})
    `;

    card.style.zIndex = Math.round(z);
    card.style.filter = `blur(${blur}px)`;
  });
}

updateCarousel();

/* ========== 4. å·¦å³åˆ‡æ›åŠŸèƒ½ ========== */

function next() {
  angle -= degStep;
  updateCarousel();
}

function prev() {
  angle += degStep;
  updateCarousel();
}

/* ========== 5. é»æ“Šç…§ç‰‡ â†’ é€²å…¥ Lightbox ========== */

const lightbox = document.getElementById("lightbox");
const lightboxImg = document.getElementById("lightboxImg");
cards.forEach((card, idx) => {
  card.addEventListener("click", () => {
    lightboxImg.src = photos[idx].src;
    lightbox.classList.add("visible");
  });
});

/* ========== 6. é—œé–‰ Lightbox ========== */

document.getElementById("closeBtn").onclick = () => {
  lightbox.classList.remove("visible");
};

/* é»æ“ŠèƒŒæ™¯ä¹Ÿé—œé–‰ */
lightbox.addEventListener("click", (e) => {
  if (e.target === lightbox) {
    lightbox.classList.remove("visible");
  }
});
/* ============================================
   7. æ”¯æ´ã€Œæ»‘é¼ æ‹–æ›³ + æ‰‹æ©Ÿæ»‘å‹•ã€åˆ‡æ›ç…§ç‰‡
   ============================================ */

let dragStartX = 0;
let dragging = false;

// === æ»‘é¼ äº‹ä»¶ ===
carouselContainer = document.querySelector(".carousel-container");

carouselContainer.addEventListener("mousedown", (e) => {
  dragging = true;
  dragStartX = e.clientX;
});

carouselContainer.addEventListener("mousemove", (e) => {
  if (!dragging) return;
  const diff = e.clientX - dragStartX;

  if (Math.abs(diff) > 60) {
    if (diff < 0) next();   // æ»‘å‘å·¦ â†’ ä¸‹ä¸€å¼µ
    else prev();            // æ»‘å‘å³ â†’ ä¸Šä¸€å¼µ
    dragging = false; // ä¸€æ¬¡æ»‘å‹•åªåˆ‡æ›ä¸€æ¬¡
  }
});

carouselContainer.addEventListener("mouseup", () => {
  dragging = false;
});

// é¿å…æ‹–æ›³å‡ºé‚Šç•Œ
carouselContainer.addEventListener("mouseleave", () => {
  dragging = false;
});

// === æ‰‹æ©Ÿè§¸æ§äº‹ä»¶ ===
carouselContainer.addEventListener("touchstart", (e) => {
  dragStartX = e.touches[0].clientX;
  dragging = true;
});

carouselContainer.addEventListener("touchmove", (e) => {
  if (!dragging) return;
  const diff = e.touches[0].clientX - dragStartX;

  if (Math.abs(diff) > 60) {
    if (diff < 0) next();
    else prev();
    dragging = false;
  }
});

carouselContainer.addEventListener("touchend", () => {
  dragging = false;
});

/* ============================================
   8. é‡‘è‰²é›ªèŠ±æ•ˆæœï¼ˆè¶…å”¯ç¾ï¼‰
   ============================================ */

const snowLayer = document.getElementById("snow");
const flakeCount = 80;

for (let i = 0; i < flakeCount; i++) {
  const flake = document.createElement("div");
  flake.className = "flake";

  const size = Math.random() * 4 + 3; // 3 ~ 7 px
  const left = Math.random() * 100;   // ç™¾åˆ†æ¯”
  const duration = Math.random() * 12 + 10;
  const delay = Math.random() * -20;

  flake.style.width = size + "px";
  flake.style.height = size + "px";
  flake.style.left = left + "vw";
  flake.style.animationDuration = duration + "s";
  flake.style.animationDelay = delay + "s";

  // é‡‘è‰²å…‰å½©
  flake.style.background = `
    radial-gradient(circle,
      rgba(255,255,255,0.95) 0%,
      rgba(255,230,150,0.9) 40%,
      rgba(200,150,50,0.8) 100%
    )
  `;
  flake.style.boxShadow = "0 0 8px rgba(255,220,150,0.8)";

  snowLayer.appendChild(flake);
}

</script>
</body>
</html>
